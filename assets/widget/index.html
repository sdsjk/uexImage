<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/index.css">

    <script type="text/javascript">
	function openPicker() {
		uexImage.onPickerClosed = onPickerClosed;
		var params = {
			min : "1",
			max : "2",
			quality : "0.5",
			usePng : "false",
			detailedInfo : "true"
		};
		var data = JSON.stringify(params);
		uexImage.openPicker(data);
	}

	function openBrowser() {
		var params = {
			"displayActionButton" : true,
			"displayNavArrows" : true,
			"enableGrid" : true,
			"startOnGrid" : false,
			"startIndex" : 1,
			data : [
					{
						"src" : "http://img0.imgtn.bdimg.com/it/u=2416840456,1080513470&fm=21&gp=0.jpg"
					},
					{
						"src" : "res://test.png"
					}
				   ]
		};
		var data = JSON.stringify(params);
		uexImage.openBrowser(data);
	}
	function openPickerForCropper() {
		uexImage.onPickerClosed = onPickerClosedForCropper;
		var params = {
			min : "1",
			max : "1",
			quality : "1",
			usePng : "false",
			detailedInfo : "false"
		};
		var data = JSON.stringify(params);
		uexImage.openPicker(data);
	}
	function openCropper() {
		var params = {
			//src : document.getElementById("selectPath").innerHTML,
			src: "res://1016.jpg",
			usePng : "true",
			mode : "1"
		};
		var data = JSON.stringify(params);
		uexImage.openCropper(data);
	}

	function saveToPhotoAlbum() {
		var params = {
			localPath : "res://1016.jpg",
			extraInfo : ""
		};
		var data = JSON.stringify(params);
		uexImage.saveToPhotoAlbum(data);
	}

	function clearOutputImages() {
		var params = {
			localPath : "",
			extraInfo : ""
		};
		var data = JSON.stringify(params);
		uexImage.clearOutputImages(data);
	}

	window.uexOnload = function(type) {
		if (type == 0) {
			uexImage.cbOpenPicker = cbOpenPicker;
			uexImage.onBrowserClosed = onBrowserClosed;
			uexImage.onCropperClosed = onCropperClosed;
			uexImage.cbSaveToPhotoAlbum = cbSaveToPhotoAlbum;
			uexImage.cbClearOutputImages = cbClearOutputImages;
		}
	}

	function cbOpenPicker(info) {
		alert("cbOpenPicker:" + info);
	}
	function onPickerClosed(info) {
		alert("onPickerClosed:" + info);
	}
	function onBrowserClosed(info) {
		alert("onBrowserClosed:" + info);
	}
	function onPickerClosedForCropper(info) {
		alert(info);
		var info = eval('(' + info + ')');
		if(!info.isCancelled){
			document.getElementById("selectPath").innerHTML = info.data[0];
		}else{
			document.getElementById("selectPath").innerHTML = "";
		}
	}
	function onCropperClosed(info) {
		alert("onCropperClosed:" + info);
	}
	function cbSaveToPhotoAlbum(info) {
		alert("cbSaveToPhotoAlbum:" + info);
	}
	function cbClearOutputImages(info) {
		alert("cbClearOutputImages:" + info);
	}
</script>
</head>

<body>
<div class="tit">uexImage</div>
<div class="conbor">
    <div class="consj">
        <span>1.打开图片选择器</span>
        <input class='btn' type='button' value='openPicker' onclick='openPicker();'>
        <span>2.打开图片浏览器</span>
        <input class='btn' type='button' value='openBrowser' onclick='openBrowser();'>
        <span>3.图片剪裁</span>
        <input class='btn' type='button' value='1.openPickerForCropper' onclick='openPickerForCropper();'>
        <span>选择的图片路径为：</span>
        <div class='tcxx' id='selectPath'></div>
        <input class='btn' type='button' value='2.openCropper' onclick='openCropper();'>
        <span>4.储存到相册</span>
        <input class='btn' type='button' value='saveToPhotoAlbum' onclick='saveToPhotoAlbum();'>
        <span>5.清除由本插件导出的所有图片</span>
        <input class='btn' type='button' value='clearOutputImages' onclick='clearOutputImages();'>
    </div>
</div>
</body>
</html>
